(()=>{var e={175:(e,t,n)=>{const o=n(555),s=n(174),{t:i,o:l,i:r}=n(175);e.exports={o:{l:null,u:null,h(e){const t=this;return new Promise((n=>{t._(),t.l=setInterval((()=>{const o=e?"#actions #like-button":"#actions #menu";let s=document.querySelector(o);if(s&&s.hasChildNodes())return t._(),n()}),500),setTimeout(t._,1e4)}))},_(){clearTimeout(this.u),clearInterval(this.l),this.l=null,this.u=null}},m(e){const t=this,{url:n=null,videoId:o=null}=e||{};if(!s.v(n))return;let i=s.$(n);t.o.h(i).then((()=>{i?t.t.m(o):t.i.m()}))},i:{m(){let e=document.querySelector(".ytvs-share-btn")||null;e&&e.remove();let t=document.querySelector("#actions #menu")||null,n=t&&t.firstElementChild||null;if(!n)return;let o=this.p();n.insertBefore(o,n.firstElementChild)},p(){let e=document.createElement("div");e.classList="ytvs-share-btn";let t=document.createElement("span");t.className="title",t.textContent=chrome.i18n.getMessage("shareToGPT");let n=document.createElement("span");return n.className="logo",e.append(n),e.append(t),e.onclick=o.T.bind(o),e}},t:{m(){let e=document.querySelector(".ytvs-share-btn")||null;e&&e.remove();let t=document.querySelector("#actions #like-button")||null,n=t&&t.parentElement||null;if(!n)return;let o=this.p();n.insertBefore(o,n.querySelector("#like-button"))},p(){if(document.querySelector(".ytvs-shorts-share-btn"))return;let e=document.createElement("div");e.classList="ytvs-shorts-share-btn";let t=document.createElement("span");t.className="btn";let n=document.createElement("span");n.className="logo",t.append(n);let s=document.createElement("span");return s.className="title",s.textContent=chrome.i18n.getMessage("shareToGPT"),e.append(t),e.append(s),e.onclick=o.T.bind(o),e}}}},555:(e,t,n)=>{const o=n(952),s=n(174);e.exports={S:{k(){let e=document.querySelector(".ytvs-share-btn")||null;if(!e)return;e.childNodes.forEach((e=>{e.style.display="none"}));let t=document.createElement("div");t.className="loader",e.append(t),!e.classList.contains("loader-on")&&e.classList.add("loader-on")},P(){let e=document.querySelector(".ytvs-share-btn")||null;e&&(e.querySelector(".loader").remove(),e.classList.contains("loader-on")&&e.classList.remove("loader-on"),e.childNodes.forEach((e=>{e.style.display="flex"})))}},T(e){const t=this;t.S.k();const n=s.I(location.href),i=location.href;let l=Date.now().toString(),r=s.$(i),a=r?Promise.resolve():s.O(n),u=null;a.then((e=>e&&e.err?null:s.N(e,n)?(u=e,r?null:s.U(u)):null)).then((e=>{let n=(e=s.Y({xml:e,xmlUrl:u}))?`Here are the subtitles AND the link to the video: [ ${i} ]\nYou must analyze the video using BOTH sources:\n1. The subtitles provided below;\n2. ALL additional information available on the video page itself (including the title, description, guest list, and any details from the YouTube video page).\nYour answer MUST be based on a combined analysis of BOTH the subtitles and the full video page information. Do NOT ignore either source, even if there are overlaps or missing details in one of them.\nPlease provide a short summary and list the key points.\nIMPORTANT: Your answer MUST be in the language the user communicates with you, NOT the language of this prompt.\nSubtitles:\n${e}`:`Here is the link to the video: [ ${i} ]\nYou must analyze the video using ALL information available on the video page itself â€” including the title, description, guest list, and any details from the YouTube video page.\nBase your answer ONLY on what can be found on the video page (do NOT invent information).\nPlease provide a short summary and list the key points.\nIMPORTANT: Your answer MUST be in the language the user communicates with you, NOT the language of this prompt.`;o.A({sessionId:l,data:n}),window.open(`https://chatgpt.com/?session_id=${l}`,"_blank"),t.S.P()}))}}},952:e=>{e.exports={A:e=>chrome.storage.local.get(null).then((t=>(t||(t=[]),t[e.sessionId]=e.data,chrome.storage.local.set(t)))),B:e=>chrome.storage.local.remove(e),L:e=>chrome.storage.local.get(null).then((t=>{if(!t)throw Error("no data by session");return t[e]}))}},174:e=>{e.exports={I(e){let t=e.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/);return t&&t[1]||null},v:e=>(e||(e=location.href),/^(https?:\/\/)?(www\.)?youtube\.com\/(?:(watch\?v=|shorts\/)[a-zA-Z0-9_-]+)/.test(e)),$:e=>(e||(e=location.href),/^(https?:\/\/)?(www\.)?youtube\.com\/shorts\/[a-zA-Z0-9_-]+(\?.*)?$/.test(e)),N(e,t){if(!e||!t)return!1;const n=new URL(e);return("www.youtube.com"===n.hostname||"youtube.com"===n.hostname)&&"/api/timedtext"===n.pathname&&n.searchParams.get("v")===t},O:e=>fetch(`https://antonkhoteev.com/khoteev-api/ysd/video/${e}/url`).then((e=>e.json())).then((e=>e&&e.url)).catch((e=>({err:!0}))),Y(e){if(!e.xml)return e.xmlUrl||"";let t=[];e.xml.replace(/<text [^>]*>([\s\S]*?)<\/text>/g,((e,n)=>(t.push(n.trim()),"")));let n=t.join("");return n=n.replace(/[.,!?;:()\[\]{}"']/g,""),n=n.replace(/\s+/g," "),n.length>12500&&(n=n.slice(0,12500)),n},U:e=>fetch(e).then((e=>e.text()))}}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}(()=>{const e=n(175),t={M(t,n,o){t&&t.title&&"newPage"===t.title&&e.m({url:t.url})}};n(175).m(),chrome.runtime.onMessage.addListener(t.M)})()})();